(this.webpackJsonptopic_tracker=this.webpackJsonptopic_tracker||[]).push([[0],{27:function(e,t,a){e.exports=a(57)},32:function(e,t,a){},38:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(24),r=a.n(o),s=(a(32),a(3)),i=a(4),l=a(6),m=a(5),u=a(10),d=(a(38),a(9)),p=a.n(d),h=function(e){return p.a.get("https://pinny-news.herokuapp.com/api/topics").then((function(t){var a=t.data.topics;if(e){var n={};return a.forEach((function(e){n[e.slug]=e.color})),n}return a}))},v=function(e,t,a,n){return p.a.get("https://pinny-news.herokuapp.com/api/articles",{params:{topic:e,sort_by:t,order:a,p:n}}).then((function(e){return e.data.articles}))},b=function(e){return p.a.get("https://pinny-news.herokuapp.com/api/articles/".concat(e)).then((function(e){return e.data.article}))},f=function(e,t,a){return p.a.get("https://pinny-news.herokuapp.com/api/articles/".concat(e,"/comments"),{params:{order:t,sort_by:a}}).then((function(e){return e.data.comments}))},E=function(e,t,a){return a?p.a.patch("https://pinny-news.herokuapp.com/api/comments/".concat(e),{inc_votes:t}):p.a.patch("https://pinny-news.herokuapp.com/api/articles/".concat(e),{inc_votes:t})},g=function(e,t){return p.a.post("https://pinny-news.herokuapp.com/api/articles/".concat(e,"/comments"),t)},y=function(e){return p.a.delete("https://pinny-news.herokuapp.com/api/comments/".concat(e))},k=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={topics:[],isLoading:!0},e.getTopics=function(){h().then((function(t){e.setState({topics:t,isLoading:!1})}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getTopics()}},{key:"render",value:function(){return this.state.isLoading?c.a.createElement("p",null,"Loading..."):c.a.createElement("div",null,c.a.createElement("div",{id:"navbar"},c.a.createElement("h1",{className:"hero-title"},"TOPIC TRACKER"),c.a.createElement("h3",null,"Discover and debate topics from all over the internet. Text only (no images) - the devil is in the detail."),c.a.createElement("h2",null,"VIEW ARTICLES BY TOPIC ->"),c.a.createElement("ul",{className:"topic---button---wrapper",style:{marginBlockStart:"0",marginBlockEnd:"0",paddingInlineStart:"0"}},this.state.topics.map((function(e){var t=e.slug,a=e.color;return c.a.createElement("li",{key:t},c.a.createElement(u.a,{className:"links",to:"/articles/topic/".concat(t)},c.a.createElement("p",{style:{backgroundColor:a,color:"white"},className:"navbuttons---topics"},t)))}))),c.a.createElement(u.a,{id:"all--articles--button",to:"/articles/"},c.a.createElement("p",null,"all articles"))))}}]),a}(n.Component),_=a(7),C=a(8),N=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={userVote:0},e.handleUpdate=function(t){e.setState((function(e){var a=e.userVote,n=0;return(0===a&&1===t||-1===a&&-1===t)&&(n=1),(0===a&&-1===t||1===a&&1===t)&&(n=-1),1===a&&-1===t&&(n=-2),-1===a&&1===t&&(n=2),{userVote:a+n}}));var a=e.props.id,n=e.props.comment,c=0;0===e.state.userVote&&1===t&&(c=1),0===e.state.userVote&&-1===t&&(c=-1),1===e.state.userVote&&-1===t&&(c=-2),-1===e.state.userVote&&1===t&&(c=2),1===e.state.userVote&&1===t&&(c=-1),-1===e.state.userVote&&-1===t&&(c=1),n?E(a,c,n):E(a,c)},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.votes,a=this.state.userVote;return c.a.createElement("div",{className:"vote-div"},c.a.createElement("button",{onClick:function(){return e.handleUpdate(1)},className:1===this.state.userVote?"button--upvote":"button--downvote"},c.a.createElement(_.a,{className:"vote-icon",icon:C.d})),c.a.createElement("button",{onClick:function(){return e.handleUpdate(-1)},className:-1===this.state.userVote?"button--upvote":"button--downvote"},c.a.createElement(_.a,{className:"vote-icon",icon:C.a})),c.a.createElement("p",{className:1===this.state.userVote||-1===this.state.userVote?"button--upvote--number":"button--downvote--number"},t+a))}}]),a}(n.Component),O=function(e){var t=e.article_id,a=e.title,n=e.created_at,o=e.author,r=e.topic,s=e.comment_count,i=e.votes,l=e.colourLookUpObject;return c.a.createElement("div",{className:"article-card"},c.a.createElement(u.a,{className:"article-card-title",to:"/articles/article/".concat(t)},c.a.createElement("h2",{className:"article-card-title"},a)),c.a.createElement("div",{className:"article-card-div"},c.a.createElement("div",{className:"article-card-div-left"},c.a.createElement("p",{className:"article-card-date"},n),c.a.createElement("p",{className:"article-card-username"},o),c.a.createElement(N,{topic:r,colourLookUpObject:l,votes:i,id:t}),c.a.createElement("p",{className:"article-card-comment"},"comment count: ",s)),c.a.createElement("div",{className:"article-card-div-right"},c.a.createElement("p",{className:"article-card-topic",style:{backgroundColor:l[r]}},r))))},j=function(e){var t=e.handlePageUpdate,a=e.page_number,n=e.article_limit,o=function(){window.scrollTo({top:0,behavior:"smooth"})};return c.a.createElement("div",{className:"pagination-div"},c.a.createElement("button",{className:"pagination-button",disabled:a<2,onClick:function(){t(-1),o()}},c.a.createElement(_.a,{className:"vote-icon",icon:C.b})),c.a.createElement("p",{className:"pagination-number"},a," / ",n),c.a.createElement("button",{className:"pagination-button",disabled:a===n,onClick:function(){t(1),o()}},c.a.createElement(_.a,{className:"vote-icon",icon:C.c})))},L=function(e){var t=e.msg||"Page not found...";return c.a.createElement("div",null,c.a.createElement("h1",null,t))},w=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={articles:[],isLoading:!0,order:"desc",sort_by:"created_at",page_number:1,article_limit:null,err:""},e.handlePageUpdate=function(t){e.setState((function(e){return{page_number:e.page_number+t}}))},e.makeArticleLimit=function(t){var a=Math.ceil(t/10*10/10);e.setState({article_limit:a})},e.getArticles=function(){v(e.props.topic_slug,e.state.sort_by,e.state.order,e.state.page_number).then((function(t){var a=t[0].total_count;e.makeArticleLimit(a),e.setState({articles:t,isLoading:!1})})).catch((function(t){console.log(t.response),e.setState({err:t.response.data.msg,isLoading:!1})}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getArticles()}},{key:"componentDidUpdate",value:function(e,t){e.topic_slug===this.props.topic_slug&&t.order===this.state.order&&t.page_number===this.state.page_number||this.getArticles()}},{key:"toggleSortBy",value:function(e){this.setState((function(t){return{order:"desc"===t.order?"asc":"desc",sort_by:e}}))}},{key:"render",value:function(){var e=this,t=this.props.colourLookUpObject,a=this.state,n=a.sort_by,o=a.order;return this.state.isLoading?c.a.createElement("p",null,"Loading..."):this.state.err?c.a.createElement(L,{msg:this.state.err}):c.a.createElement("div",{className:"right-column"},c.a.createElement("div",{className:"sort-button-div"},c.a.createElement("button",{className:"created_at"===n?"sort-button-selected":"sort-button-deselected",onClick:function(){return e.toggleSortBy("created_at")}},c.a.createElement(_.a,{className:"created_at"===n?"sort-icon-show":"sort-icon-hide ",icon:C.g})," ",c.a.createElement("p",{className:"asc"===o&&"created_at"===n?"icon-hide-text":"icon-show-text"}," New")," ",c.a.createElement("p",{className:"asc"===o&&"created_at"===n?"icon-show-text":"icon-hide-text"}," Old")),c.a.createElement("button",{className:"comment_count"===n?"sort-button-selected":"sort-button-deselected",onClick:function(){return e.toggleSortBy("comment_count")}},c.a.createElement(_.a,{className:"comment_count"===n?"sort-icon-show":"sort-icon-hide ",icon:C.f})," ",c.a.createElement("p",{className:"asc"===o&&"comment_count"===n?"icon-hide-text":"icon-show-text"}," Most Comments")," ",c.a.createElement("p",{className:"asc"===o&&"comment_count"===n?"icon-show-text":"icon-hide-text"}," Least Comments")),c.a.createElement("button",{className:"votes"===n?"sort-button-selected":"sort-button-deselected",onClick:function(){return e.toggleSortBy("votes")}},c.a.createElement(_.a,{className:"votes"===n?"sort-icon-show":"sort-icon-hide ",icon:C.e})," ",c.a.createElement("p",{className:"asc"===o&&"votes"===n?"icon-hide-text":"icon-show-text"}," Most Votes")," ",c.a.createElement("p",{className:"asc"===o&&"votes"===n?"icon-show-text":"icon-hide-text"}," Least Votes"))),c.a.createElement("ul",null,this.state.articles.map((function(e){return c.a.createElement("li",{key:e.article_id},c.a.createElement(O,Object.assign({},e,{colourLookUpObject:t})))}))),c.a.createElement(j,{page_number:this.state.page_number,handlePageUpdate:this.handlePageUpdate,article_limit:this.state.article_limit}))}}]),a}(n.Component),S=a(26),U=function(e){return c.a.createElement("div",null,c.a.createElement("p",null,e.author),c.a.createElement("p",null,e.body),c.a.createElement("p",null,e.created_at),c.a.createElement(N,{votes:e.votes,id:e.comment_id,comment:"comment"}),e.username===e.author&&c.a.createElement("button",{onClick:function(){e.deleteComments(e.comment_id)}},"delete"))},A=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={comment:""},e.handleInputChange=function(t){var a=t.target.value;e.setState({comment:a})},e.handleCommentSubmit=function(t){console.log(e.props),t.preventDefault();var a=e.props,n=a.article_id,c={username:a.username,body:e.state.comment};g(n,c).then((function(t){var a=t.data;e.props.addComments(a)})),e.setState({comment:""})},e}return Object(i.a)(a,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("form",{className:"comment-form",onSubmit:this.handleCommentSubmit},c.a.createElement("input",{required:!0,type:"text",onChange:this.handleInputChange,placeholder:"Add a comment...",value:this.state.comment}),c.a.createElement("button",null,"add comment")))}}]),a}(n.Component),V=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={article:{},isLoading:!0,articleComments:[],err:"",order:"desc",sort_by:"created_at"},e.addComments=function(t){var a=t.comment;e.setState((function(e){return{articleComments:[a].concat(Object(S.a)(e.articleComments))}}))},e.deleteComments=function(t){y(t),e.setState((function(e){var a=e.articleComments.findIndex((function(e){return e.comment_id===t}));return e.articleComments.splice(a,1),{articleComments:e.articleComments}}))},e.getArticle=function(){var t=e.props.article_id,a=e.state,n=a.order,c=a.sort_by;b(t).then((function(t){e.setState({article:t})})).catch((function(t){e.setState({err:t.response.data.msg,isLoading:!1})})),f(t,n,c).then((function(t){e.setState({articleComments:t,isLoading:!1})})).catch((function(t){e.setState({err:t.response.data.msg,isLoading:!1})}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getArticle()}},{key:"componentDidUpdate",value:function(e,t){t.order!==this.state.order&&this.getArticle()}},{key:"toggleSortBy",value:function(e){this.setState((function(t){return{order:"desc"===t.order?"asc":"desc",sort_by:e}}))}},{key:"render",value:function(){var e=this;if(this.state.isLoading)return c.a.createElement("p",null,"Loading...");if(this.state.err)return c.a.createElement(L,{msg:this.state.err});var t=this.props.colourLookUpObject,a=this.state.article,n=a.article_id,o=a.topic,r=a.title,s=a.body,i=a.created_at,l=a.author,m=a.votes;return console.log(t),c.a.createElement("div",{className:"article-div"},c.a.createElement("div",null,c.a.createElement("div",{className:"article-topic-div"},c.a.createElement("p",{className:"article-topic",style:{backgroundColor:t[o]}},o)),c.a.createElement("p",{className:"article-title"},r),c.a.createElement("p",{className:"article-date"},i),c.a.createElement("p",{className:"article-body"},s),c.a.createElement("p",{className:"article-card-username"},l),c.a.createElement(N,{votes:m,id:n})),c.a.createElement(A,{username:this.props.username,article_id:n,addComments:this.addComments}),c.a.createElement("button",{onClick:function(){return e.toggleSortBy("created_at")}},"sort by date"),c.a.createElement("button",{onClick:function(){return e.toggleSortBy("votes")}},"sort by votes"),c.a.createElement("div",null,c.a.createElement("ul",null,this.state.articleComments.map((function(t){return c.a.createElement("li",{key:t.comment_id},c.a.createElement(U,Object.assign({username:e.props.username},t,{deleteComments:e.deleteComments})))})))))}}]),a}(n.Component),x=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={username:"happyamy2016",colourLookUpObject:{}},e.getTopicColours=function(){h("lookUp").then((function(t){e.setState({colourLookUpObject:t})}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getTopicColours()}},{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{id:"hero--div"},c.a.createElement("div",{id:"hero--container--1"},c.a.createElement(k,null)),c.a.createElement("div",{id:"hero--container--2"},c.a.createElement(u.b,null,c.a.createElement(w,{colourLookUpObject:this.state.colourLookUpObject,path:"/"}),c.a.createElement(w,{colourLookUpObject:this.state.colourLookUpObject,path:"/articles"}),c.a.createElement(w,{colourLookUpObject:this.state.colourLookUpObject,path:"/articles/topic/:topic_slug"}),c.a.createElement(V,{username:this.state.username,colourLookUpObject:this.state.colourLookUpObject,path:"/articles/article/:article_id"}),c.a.createElement(L,{default:!0})))))}}]),a}(n.Component);r.a.render(c.a.createElement(x,null),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.00ef237e.chunk.js.map